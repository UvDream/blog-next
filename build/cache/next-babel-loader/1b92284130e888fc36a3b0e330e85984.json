{"ast":null,"code":"import _Row from \"antd/lib/row\";\nimport _Col from \"antd/lib/col\";\nimport _List from \"antd/lib/list\";\nimport _Icon from \"antd/lib/icon\";\nimport _Skeleton from \"antd/lib/skeleton\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport Header from \"../components/Header\";\nimport Head from \"next/head\";\nimport dayjs from \"dayjs\";\nimport Author from \"../components/Author\";\nimport Link from \"next/link\";\nimport Article from \"../api/article/index\";\nimport marked from \"marked\";\nimport hljs from \"highlight.js\";\nimport CountUp from \"react-countup\";\nimport \"../static/style/pages/theme.less\";\nimport \"../static/style/pages/index.less\";\n\nvar Home = function Home() {\n  // 解析markdown\n  var renderer = new marked.Renderer();\n  marked.setOptions({\n    renderer: renderer,\n    gfm: true,\n    pedantic: false,\n    sanitize: false,\n    tables: true,\n    breaks: false,\n    smartLists: true,\n    smartypants: false,\n    highlight: function highlight(code) {\n      return hljs.highlightAuto(code).value;\n    }\n  });\n\n  var _useState = useState([]),\n      articleList = _useState[0],\n      setArticleList = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  useEffect(function () {\n    getList();\n  }, []); // 获取列表\n\n  var getList = function getList() {\n    setLoading(true);\n    Article.list({\n      page: \"1\",\n      page_size: \"10\"\n    }).then(function (res) {\n      if (res.code === 200) {\n        console.log(\"获取列表数据\");\n        console.log(res);\n        setLoading(false);\n        setArticleList(res.data.article_list);\n      }\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: \"home\"\n  }, __jsx(Head, null, __jsx(\"title\", null, \"\\u6587\\u7AE0\\u5217\\u8868\"), __jsx(\"meta\", {\n    name: \"viewport\",\n    content: \"initial-scale=1.0, width=device-width\"\n  })), __jsx(Header, {\n    status: \"0\"\n  }), __jsx(_Row, {\n    className: \"home-main common-main\",\n    type: \"flex\",\n    justify: \"center\"\n  }, __jsx(_Col, {\n    className: \"home-main-left common-left\",\n    xs: 24,\n    sm: 24,\n    md: 16,\n    lg: 18,\n    xl: 14\n  }, loading ? __jsx(\"div\", {\n    style: {\n      padding: \"0 20px\"\n    }\n  }, __jsx(_Skeleton, {\n    active: true\n  }), __jsx(_Skeleton, {\n    active: true\n  }), __jsx(_Skeleton, {\n    active: true\n  }), __jsx(_Skeleton, {\n    active: true\n  }), __jsx(_Skeleton, {\n    active: true\n  }), __jsx(_Skeleton, {\n    active: true\n  })) : __jsx(\"div\", null, __jsx(_List, {\n    header: __jsx(\"div\", {\n      className: \"home-main-left-header\"\n    }, \"\\u6700\\u65B0\\u6587\\u7AE0\"),\n    itemLayout: \"vertical\",\n    dataSource: articleList,\n    renderItem: function renderItem(item) {\n      return __jsx(_List.Item, null, __jsx(\"div\", {\n        className: \"home-main-left-title\"\n      }, __jsx(Link, {\n        href: {\n          pathname: \"/articleDetail\",\n          query: {\n            id: item.ID\n          }\n        }\n      }, __jsx(\"a\", null, item.title))), __jsx(\"div\", {\n        className: \"home-main-left-tag\"\n      }, __jsx(\"span\", null, __jsx(_Icon, {\n        type: \"calendar\"\n      }), dayjs(item.add_time).format(\"YYYY-MM-DD HH:mm:ss\")), __jsx(\"span\", null, __jsx(_Icon, {\n        type: \"tags\"\n      }), item.type_name), __jsx(\"span\", null, __jsx(_Icon, {\n        type: \"fire\"\n      }), __jsx(CountUp, {\n        end: item.view_count\n      }), \"/\\u4EBA\")), __jsx(\"div\", {\n        className: \"home-main-left-content\",\n        dangerouslySetInnerHTML: {\n          __html: marked(item.article_content)\n        }\n      }), __jsx(\"div\", {\n        className: \"home-main-left-btn\"\n      }, __jsx(Link, {\n        href: {\n          pathname: \"/articleDetail\",\n          query: {\n            id: item.ID\n          }\n        }\n      }, __jsx(\"a\", null, \"\\u9605\\u8BFB\\u5168\\u6587\"))));\n    }\n  }))), __jsx(_Col, {\n    className: \"home-main-right common-right\",\n    xs: 0,\n    sm: 0,\n    md: 7,\n    lg: 5,\n    xl: 4\n  }, __jsx(Author, null))));\n};\n\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}